const canvas=document.querySelector("canvas"),context=canvas.getContext("2d");canvas.width=innerWidth,canvas.height=innerHeight;const image=document.getElementById("image"),imageHeight=image.height,halfImageWidth=image.width/2;let level=0,score=250;const random=(e,t)=>Math.random()*e+t;function clearOut(){context.clearRect(0,0,canvas.width,canvas.height),context.fillStyle="rgba(0, 0, 0, 0.1)",context.fillRect(0,0,canvas.width,canvas.height)}const colorRandom=()=>{return"rgb("+random(250,50)+","+random(250,50)+","+random(250,50)+",0.7)"};let player={x:canvas.width/2,y:canvas.height,dx:15};function draw_image(){context.drawImage(image,player.x-halfImageWidth,player.y-imageHeight)}class projectile{constructor(e,t,i,n,a,l){this.x=e,this.y=t,this.dx=n,this.dy=a,this.radius=i,this.color=l}drawCircle(){context.beginPath(),context.arc(this.x,this.y,this.radius,2*Math.PI,!1),context.fillStyle=this.color,context.fill(),context.closePath()}update(){this.y>0&&this.x>0&&(this.drawCircle(),this.y-=this.dy,this.x-=this.dx)}}class circle{constructor(e,t,i,n,a,l){this.x=e,this.y=t,this.dx=n,this.dy=a,this.radius=i,this.color=l}drawCircle(){context.beginPath(),context.arc(this.x,this.y,this.radius,2*Math.PI,!1),context.fillStyle=this.color,context.fill(),context.closePath()}update(){this.drawCircle(),this.y<canvas.height?this.y+=this.dy:this.y>=canvas.height&&(this.y=0)}}class explosion{constructor(e,t,i,n,a,l){this.x=e,this.y=t,this.dx=n,this.dy=a,this.radius=i,this.color=l,this.alpha=1}drawCircle(){context.save(),context.globalAlpha=this.alpha,context.beginPath(),context.arc(this.x,this.y,this.radius,2*Math.PI,!1),context.fillStyle=this.color,context.fill(),context.closePath(),context.restore()}update(){this.y>0&&this.x>0&&(this.drawCircle(),this.y-=this.dy,this.x-=this.dx,this.alpha-=.04)}}let duration=0;setInterval(()=>{let e=new Date,t=e.getHours(),i=e.getMinutes(),n=e.getSeconds();t=t>10?t:"0"+t,i=i>10?i:"0"+i,n=n>10?n:"0"+n,document.getElementById("localtime").innerHTML=t+" : "+i+" : "+n,duration++;let a=parseInt(duration/3600),l=parseInt((duration-3600*a)/60),r=duration-(3600*a+60*l);a=a>10?a:"0"+a,l=l>10?l:"0"+l,r=r>10?r:"0"+r,document.getElementById("duration").innerHTML="Time: "+a+" : "+l+" : "+r},1e3);let projectiles=[],circles=[],explosions=[],numberOfCircle=20,gameStatus=null;function reset(){projectiles=[],circles=[],explosions=[],level=0,score=250,fillCircle(),numberOfCircle=20}const fillCircle=()=>{for(let e=0;e<numberOfCircle;e++)circles.push(new circle(random(canvas.width-40,0),0,random(30,10),0,random(2,.5),"rgb("+random(250,50)+","+random(250,50)+","+random(250,50)+",0.7)"))};function update(){clearOut(),draw_image(),explosions.forEach((e,t)=>{e.alpha<=0?explosions.splice(t,1):e.update()}),projectiles.forEach((e,t)=>{e.update(),e.y-e.radius<0&&setTimeout(()=>{projectiles.splice(t,1)},0)}),0==circles.length&&(level+=1,fillCircle(),circle.dy+=(level-1)/2,numberOfCircle+=10,console.log(score)),circles.forEach((e,t)=>{e.update(),0==e.y&&(score-=e.radius,console.log(score)),projectiles.forEach((i,n)=>{if(Math.hypot(i.x-e.x,i.y-e.y)-e.radius-i.radius<1){score+=e.radius,projectiles.splice(n,1);for(let t=0;t<3*e.radius;t++)explosions.push(new explosion(i.x,i.y,random(2,1),(Math.random()-.5)*random(10,1),(Math.random()-.5)*random(10,1),e.color));e.radius-10>10?(e.radius-=10,e.dy*=.8):circles.splice(t,1)}})}),gameStatus=requestAnimationFrame(update),document.getElementById("level").innerHTML="Level : "+level,document.getElementById("score").innerHTML="score : "+Math.round(score),document.getElementById("status").innerHTML="Game started",score<=0&&(cancelAnimationFrame(gameStatus),document.getElementById("status").innerHTML="game Over",document.getElementById("startCover").style.display="flex",document.getElementById("welcome").style.display="none",document.getElementById("start").innerHTML="restart")}fillCircle(),document.onkeydown=(e=>{"ArrowRight"==e.key&&player.x<canvas.width?player.x+=player.dx:"ArrowLeft"==e.key&&player.x>0&&(player.x-=player.dx),"Shift"==e.key&&(projectiles.push(new projectile(player.x-halfImageWidth/2,player.y-imageHeight/2,4,0,canvas.height/80,"white")),score-=1)}),document.getElementById("moveLeft").addEventListener("click",()=>{player.x-=player.dx}),document.getElementById("shoot").addEventListener("click",()=>{projectiles.push(new projectile(player.x-halfImageWidth/2,player.y-imageHeight/2,4,0,canvas.height/55,"white")),score-=1}),document.getElementById("moveRight").addEventListener("click",()=>{player.x+=player.dx}),document.getElementById("start").addEventListener("click",()=>{document.getElementById("startCover").style.display="none",document.getElementById("section1").style.display="flex",document.getElementById("section1").style.position="fixed",reset(),update()});const welcome=document.getElementById("welcome").textContent;let i=0;function typewriter(){i<welcome.length&&(document.getElementById("welcome").innerHTML+=welcome.charAt(i),i++,setTimeout(typewriter,200))}document.getElementById("welcome").innerHTML="",typewriter();









